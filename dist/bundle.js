!function(){"use strict";var t={d:function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};t.d({},{M:function(){return L}});var e="You did not type in any message",n="The tweet shall differ from the already existing tweets";function i(t){var e=t.map((function(t){return t.id}));if(0===e.length)return 1;e.length>1&&e.sort((function(t,e){return t-e}));for(var n=0;n<e.length;n++)if(e[n+1]&&e[n+1]-e[n]>1)return e[n]+1;return e[e.length-1]+1}function r(t,e){for(var n=0;n<e.length;n++)if(e[n].text===t)return!1;return!0}function s(t,e){for(var n=JSON.parse(sessionStorage.getItem("tweets")),i=0;i<n.length;i++)if(+n[i].id==+t)return e?(n[i].liked=!0,void sessionStorage.setItem("tweets",JSON.stringify(n))):(n[i].liked=!1,void sessionStorage.setItem("tweets",JSON.stringify(n)))}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l=document.querySelector("#allTweets__list"),u=document.querySelector("#likedTweets__list");function d(t){document.querySelectorAll(".twitterSection").forEach((function(e){e.id===t?e.classList.contains("hidden")&&e.classList.remove("hidden"):e.classList.contains("hidden")||e.classList.add("hidden")}))}function c(t,e,n,i,r){var s=document.createElement(t);if(e&&(s.id=e),i&&(s.textContent=i),r)for(var o=Object.keys(r),a=0;a<o.length;a++)s.setAttribute(o[a],r[o[a]]);if(n)for(var l=0;l<n.length;l++)s.classList.add(n[l]);return s}function f(){o(l.children).forEach((function(t){return t.remove()})),sessionStorage.getItem("tweets")&&JSON.parse(sessionStorage.getItem("tweets")).forEach((function(t){return l.append(w(t))}))}function w(t){var e=c("li",null,["tweet"],null,{"data-tweet":t.id}),n=c("p",null,["tweet__date"],t.date),i=c("p",null,["tweet__text"],t.text,{"data-tweet":t.id}),r=c("ul",null,["tweet__items"]),s=c("li",null,["tweet__item","btn-like"]),o=c("li",null,["tweet__item","btn-delete"]),a=c("button",null,["tweet__button",t.liked?"tweet__button--unlike":"tweet__button--like"],null,{type:"button",title:"Like / Unlike tweet"});s.append(a);var l=c("button",null,["tweet__button","tweet__button--delete"],null,{type:"button",title:"Delete tweet"});return o.append(l),r.append(s,o),e.append(n,i,r),e}function g(t){var e=document.querySelector("#modal");e.innerText=t,e.classList.add("modal--show"),setTimeout((function(){e.classList.remove("modal--show")}),2e3)}document.addEventListener("click",(function(t){t.target.classList.contains("tweet__button--like")?(t.target.classList.remove("tweet__button--like"),t.target.classList.add("tweet__button--unlike"),s(t.target.closest(".tweet").getAttribute("data-tweet"),!0),g("You liked the tweet!"),L()):t.target.classList.contains("tweet__button--unlike")?(t.target.classList.add("tweet__button--like"),t.target.classList.remove("tweet__button--unlike"),s(t.target.closest(".tweet").getAttribute("data-tweet"),!1),g("You disliked the tweet =("),L()):t.target.classList.contains("tweet__button--delete")&&(function(t){for(var e=JSON.parse(sessionStorage.getItem("tweets")),n=0;n<e.length;n++)if(+e[n].id==+t)return e.splice(n,1),void sessionStorage.setItem("tweets",JSON.stringify(e))}(t.target.closest(".tweet").getAttribute("data-tweet")),t.target.closest(".tweet").remove())}));var m=document.querySelector("#controlsAddTweet"),h=document.querySelector("#controlsShowLiked"),S=document.querySelector("#controlsMainPage"),v=document.querySelector("#newTweet__button--save"),_=document.querySelector("#editTweet__button--save"),p=document.querySelectorAll(".cancel-btn"),y=document.querySelector("#newTweet__text");function b(t,e){t?S.classList.contains("hidden")&&S.classList.remove("hidden"):S.classList.contains("hidden")||S.classList.add("hidden"),e?m.classList.contains("hidden")&&m.classList.remove("hidden"):m.classList.contains("hidden")||m.classList.add("hidden")}function L(){if(sessionStorage.getItem("tweets")&&0!==JSON.parse(sessionStorage.getItem("tweets")).length){for(var t=JSON.parse(sessionStorage.getItem("tweets")),e=0;e<t.length;e++)if(t[e].liked)return void(h.classList.contains("hidden")&&h.classList.remove("hidden"));h.classList.contains("hidden")||h.classList.add("hidden")}else h.classList.contains("hidden")||h.classList.add("hidden")}function k(){d("allTweets"),f(),b(!1,!0),L()}f(),L(),m.addEventListener("click",(function(){history.pushState({id:"newTweet"},null,"#/add"),y.value="",d("newTweet"),b(!0,!1)})),h.addEventListener("click",(function(){history.pushState({id:"likedTweets"},null,"#/liked"),o(u.children).forEach((function(t){return t.remove()})),JSON.parse(sessionStorage.getItem("tweets")).forEach((function(t){t.liked&&u.append(w(t))})),d("likedTweets"),b(!0,!1)})),S.addEventListener("click",(function(){history.pushState({id:null},null," "),k()})),p.forEach((function(t){t.addEventListener("click",(function(){history.pushState({id:null},null," "),k()}))})),v.addEventListener("click",(function(){(function(t){if(""===t)return g(e),!1;if(sessionStorage.getItem("tweets")){var s=JSON.parse(sessionStorage.getItem("tweets"));return r(t,s)?(s.push({id:i(s),text:t,liked:!1,date:(new Date).toLocaleString()}),sessionStorage.setItem("tweets",JSON.stringify(s)),!0):(g(n),!1)}return sessionStorage.setItem("tweets",JSON.stringify([{id:1,text:t,liked:!1,date:(new Date).toLocaleString()}])),!0})(y.value)&&(history.pushState({id:null},null," "),k())})),_.addEventListener("click",(function(){(function(){var t=document.querySelector("#editTweet__text").value;if(""===t)return g(e),!1;var i=document.querySelector("#editTweet__text").getAttribute("data-tweet"),s=JSON.parse(sessionStorage.getItem("tweets"));if(r(t,s)){for(var o=0;o<s.length;o++)if(+s[o].id==+i){s[o].text=t;break}return sessionStorage.setItem("tweets",JSON.stringify(s)),!0}return g(n),!1})()&&(history.pushState({id:null},null," "),k())})),document.addEventListener("click",(function(t){t.target.classList.contains("tweet__text")&&(history.pushState({id:"editTweet"},null,"#/edit/:item_".concat(t.target.getAttribute("data-tweet"))),d("editTweet"),function(t){var e=document.querySelector("#editTweet__text");e.setAttribute("data-tweet",t),e.value="";for(var n=JSON.parse(sessionStorage.getItem("tweets")),i=0;i<n.length;i++)if(+n[i].id==+t)return void(e.value=n[i].text)}(t.target.getAttribute("data-tweet")),b(!0,!1))})),window.addEventListener("popstate",(function(t){null===t.state.id?k():d(t.state.id)}))}();